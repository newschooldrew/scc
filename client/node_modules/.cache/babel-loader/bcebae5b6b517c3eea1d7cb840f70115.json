{"ast":null,"code":"var _jsxFileName = \"/Users/andrewperez/Documents/projects/scc/client/src/App.js\";\nimport React, { useContext, useEffect, useState, useRef } from 'react';\nimport AuthContext from './AuthContext';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { fetchAllMasks, filterMasks, changeLimitReached, removeItemFromInventory } from './actions';\nimport { Link, withRouter } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles'; // reactstrap components\n\nimport { Button, Card, CardHeader, CardBody, CardFooter, CardTitle, CardText, Collapse, Label, FormGroup, Form, Input, InputGroupAddon, InputGroupText, InputGroup, Container, Row, Col, UncontrolledTooltip } from \"reactstrap\";\n\nconst App = ({\n  history\n}) => {\n  let itemsArr = [];\n  const {\n    state,\n    dispatch\n  } = useContext(AuthContext);\n  const {\n    allMasks,\n    cartItems\n  } = state;\n  const [emailFocus, setEmailFocus] = React.useState(false);\n  const [quantity, setQuantities] = useState({});\n  let sessionCartItems = JSON.parse(sessionStorage.getItem('cart'));\n  const [filterValue, setFilterValue] = useState({\n    people: false,\n    animals: false,\n    flowers: false\n  });\n  const [values, setValues] = useState({\n    people: false,\n    animals: false,\n    flowers: false\n  });\n  const mobileSize = useMediaQuery('(max-width:600px)');\n  const tabletSize = useMediaQuery('(max-width:800px)');\n  const arrLength = arr.length;\n  const [elRefs, setElRefs] = React.useState([]);\n  useEffect(() => {\n    // add or remove refs\n    setElRefs(elRefs => Array(arrLength).fill().map((_, i) => elRefs[i] || createRef()));\n  }, [arrLength]);\n  const useStyles = makeStyles(theme => ({\n    paper: {\n      display: 'flex',\n      textAlign: 'center',\n      flexDirection: 'column',\n      padding: '15px',\n      margin: '15px'\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main\n    },\n    form: {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: theme.spacing(3)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2)\n    },\n    paper: {\n      padding: theme.spacing(.25),\n      textAlign: 'center',\n      color: theme.palette.text.secondary\n    },\n    clickable: {\n      cursor: 'pointer',\n      width: '200px',\n      height: '160px',\n      objectFit: 'cover',\n      borderRadius: '4x'\n    },\n    scroll: {\n      overflow: 'scroll',\n      margin: '15% 0 0 0'\n    },\n    width: {\n      width: 0\n    },\n    center: {\n      textAlign: 'center'\n    },\n    buttonCenter: {\n      margin: '5px'\n    },\n    fullWidth: {\n      margin: 'auto'\n    },\n    buttonMargin: {\n      marginRight: '10px'\n    }\n  }));\n  const classes = useStyles();\n  useEffect(() => {\n    fetchAllMasks(dispatch);\n  }, []);\n  useEffect(() => {\n    fetchAllMasks(dispatch);\n\n    if (cartItems && cartItems.length > 0) {\n      try {\n        sessionStorage.setItem('cart', JSON.stringify(cartItems));\n        newTotal = cartItems.reduce((acc, cartItem) => acc + cartItem.quantity, 0);\n        sessionStorage.setItem('cartTotal', newTotal);\n      } catch (e) {\n        console.log(\"cartItems is empty\");\n      }\n    }\n  }, [cartItems]); // collapse states and functions\n\n  const [collapses, setCollapses] = React.useState([1]);\n\n  const changeCollapse = collapse => {\n    if (collapses.includes(collapse)) {\n      setCollapses(collapses.filter(prop => prop !== collapse));\n    } else {\n      setCollapses([...collapses, collapse]);\n    }\n  };\n\n  const handleChange = e => {\n    const targetValue = e.target.value;\n    filterMasks(targetValue, dispatch);\n  };\n\n  const handleMobileChange = e => {\n    const targetValue = e.target.value;\n    filterMasks(targetValue, dispatch);\n\n    if (filterValue[targetValue] == null) {\n      setFilterValue({ ...filterValue,\n        [targetValue]: true\n      });\n    } else {\n      setFilterValue({ ...filterValue,\n        [targetValue]: !filterValue[targetValue]\n      });\n    }\n  };\n\n  let newTotal;\n\n  const addItemToCart = (id, title, price, url) => {\n    console.log(state);\n    const item = {\n      id,\n      title,\n      price,\n      url\n    };\n    dispatch({\n      type: \"ADD_ITEM_TO_CART\",\n      payload: item\n    });\n    let foundItem;\n    removeItemFromInventory(id, sessionCartItems);\n    let existingNum;\n\n    if (sessionStorage.getItem(id)) {\n      existingNum = parseInt(sessionStorage.getItem(id));\n      console.log(\"existingNum exists\");\n      console.log(existingNum);\n      sessionStorage.setItem(`${id}`, existingNum + 1);\n    } else {\n      console.log(\"existingNum does not exist\");\n      sessionStorage.setItem(`${id}`, 1);\n    }\n\n    if (myRefs.current == 2) {\n      console.log(\"current ref hit!!\");\n    }\n\n    myRefs.current += 1;\n    console.log(\"myRefs\");\n    console.log(myRefs);\n  };\n\n  const removeItemFromCart = (id, title, price) => {\n    const item = {\n      id,\n      title,\n      price\n    };\n    dispatch({\n      type: \"REMOVE_ITEM_FROM_CART\",\n      payload: item\n    });\n    let myCachedTotal = JSON.parse(sessionStorage.getItem('cartTotal'));\n    console.log(\"myCachedTotal:\");\n    console.log(myCachedTotal);\n\n    if (myCachedTotal == 1) {\n      console.log(\"Clear cart\");\n      sessionStorage.removeItem('cart');\n      sessionStorage.setItem('cartTotal', 0);\n    }\n\n    let existingNum = parseInt(sessionStorage.getItem(id));\n    console.log(\"existingNum exists\");\n    console.log(existingNum);\n    sessionStorage.setItem(`${id}`, existingNum - 1);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: (\"wrapper\", classes.scroll),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, !mobileSize ? /*#__PURE__*/React.createElement(Button, {\n    color: \"info\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 66\n    }\n  }, \"Go To Checkout\")) : null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, mobileSize || tabletSize ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.fullWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: filterValue[\"animals\"] == true ? \"success\" : \"info\",\n    type: \"button\",\n    className: classes.buttonCenter,\n    value: \"animals\",\n    onClick: e => handleMobileChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 19\n    }\n  }, \"Animals\"), /*#__PURE__*/React.createElement(Button, {\n    color: filterValue[\"flowers\"] == true ? \"success\" : \"info\",\n    type: \"button\",\n    className: classes.buttonCenter,\n    value: \"flowers\",\n    onClick: e => handleMobileChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 19\n    }\n  }, \"Flowers\"), /*#__PURE__*/React.createElement(Button, {\n    color: filterValue[\"people\"] == true ? \"success\" : \"info\",\n    type: \"button\",\n    className: classes.buttonCenter,\n    value: \"people\",\n    onClick: e => handleMobileChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 19\n    }\n  }, \"People\")) : /*#__PURE__*/React.createElement(Col, {\n    md: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 19\n    }\n  }, \"SCC Masks!\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse-panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"card-refine card-plain\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(CardTitle, {\n    tag: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 23\n    }\n  }, \"Filter Your Masks\", \" \", /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-icon btn-neutral pull-right\",\n    color: \"default\",\n    id: \"tooltip633919451\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"arrows-1_refresh-69 now-ui-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(UncontrolledTooltip, {\n    delay: 0,\n    target: \"tooltip633919451\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 27\n    }\n  }, \"Reset Filter\")), /*#__PURE__*/React.createElement(CardHeader, {\n    id: \"headingTwo\",\n    role: \"tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"text-info\",\n    \"aria-expanded\": collapses.includes(1),\n    \"data-toggle\": \"collapse\",\n    \"data-parent\": \"#accordion\",\n    href: \"#pablo\",\n    onClick: e => {\n      e.preventDefault();\n      changeCollapse(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 29\n    }\n  }, \"Type\", \" \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"now-ui-icons arrows-1_minimal-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 31\n    }\n  })))), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: collapses.includes(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"checkbox\",\n    value: \"flowers\",\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form-check-sign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 33\n    }\n  }), \"Flowers\")), /*#__PURE__*/React.createElement(FormGroup, {\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"checkbox\",\n    value: \"animals\",\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form-check-sign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 33\n    }\n  }), \"Animals\")), /*#__PURE__*/React.createElement(FormGroup, {\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    check: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"checkbox\",\n    value: \"people\",\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"form-check-sign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 33\n    }\n  }), \"People\")))))))), /*#__PURE__*/React.createElement(Col, {\n    md: \"9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }\n  }, allMasks && allMasks.map((post, i) => {\n    const id = post._id;\n    const title = post.title;\n    const price = post.price;\n    const url = post.url;\n    const quantity = post.quantity;\n    let sessionCartItems = JSON.parse(sessionStorage.getItem('cart'));\n    let qty;\n    let limit;\n    let disabled;\n    let limitReached;\n\n    if (sessionStorage.getItem(id) == post.quantity) {\n      limitReached = true;\n    }\n\n    if (sessionCartItems && sessionCartItems.length > 0) {\n      console.log(id);\n      console.log(sessionCartItems.find(e => console.log(e)));\n      let foundId = sessionCartItems.filter(e => e.id == id);\n      console.log(foundId);\n      qty = sessionCartItems.find((e, i) => e.title == post.title);\n\n      try {\n        disabled = qty.quantity;\n        console.log(disabled);\n      } catch (e) {\n        console.log(\"no quantity\");\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Col, {\n      lg: \"4\",\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"card-product card-plain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: (\"card-image\", classes.center),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onClick: e => history.push(`/product-page/${post._id}`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: classes.clickable,\n      alt: \"...\",\n      src: post.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      tag: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 29\n      }\n    }, post.title), /*#__PURE__*/React.createElement(CardText, {\n      className: \"card-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 29\n      }\n    }, post.description), /*#__PURE__*/React.createElement(CardTitle, {\n      className: \"card-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 33\n      }\n    }, \"$\", post.price), /*#__PURE__*/React.createElement(CardTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"info\",\n      ref: elRefs[i],\n      size: mobileSize || tabletSize ? \"lg\" : \"regular\",\n      variant: \"contained\",\n      disabled: !disabled,\n      className: classes.buttonMargin,\n      onClick: () => removeItemFromCart(id, title, price, url),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 37\n      }\n    }, \"-\"), \"  \", /*#__PURE__*/React.createElement(Button, {\n      color: \"info\",\n      ref: elRefs[i],\n      size: mobileSize || tabletSize ? \"lg\" : \"regular\",\n      variant: \"contained\",\n      name: id,\n      className: classes.buttonMargin,\n      disabled: limitReached,\n      onClick: e => addItemToCart(id, title, price, url),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 37\n      }\n    }, \"+\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 39\n      }\n    }, post.limitReached))), /*#__PURE__*/React.createElement(CardFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(CardText, {\n      className: classes.paper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 33\n      }\n    }, \"Quantity: \"), /*#__PURE__*/React.createElement(CardText, {\n      className: classes.paper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 33\n      }\n    }, post.quantity)))));\n  })))))))));\n};\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/andrewperez/Documents/projects/scc/client/src/App.js"],"names":["React","useContext","useEffect","useState","useRef","AuthContext","useMediaQuery","fetchAllMasks","filterMasks","changeLimitReached","removeItemFromInventory","Link","withRouter","makeStyles","Button","Card","CardHeader","CardBody","CardFooter","CardTitle","CardText","Collapse","Label","FormGroup","Form","Input","InputGroupAddon","InputGroupText","InputGroup","Container","Row","Col","UncontrolledTooltip","App","history","itemsArr","state","dispatch","allMasks","cartItems","emailFocus","setEmailFocus","quantity","setQuantities","sessionCartItems","JSON","parse","sessionStorage","getItem","filterValue","setFilterValue","people","animals","flowers","values","setValues","mobileSize","tabletSize","arrLength","arr","length","elRefs","setElRefs","Array","fill","map","_","i","createRef","useStyles","theme","paper","display","textAlign","flexDirection","padding","margin","avatar","spacing","backgroundColor","palette","secondary","main","form","width","marginTop","submit","color","text","clickable","cursor","height","objectFit","borderRadius","scroll","overflow","center","buttonCenter","fullWidth","buttonMargin","marginRight","classes","setItem","stringify","newTotal","reduce","acc","cartItem","e","console","log","collapses","setCollapses","changeCollapse","collapse","includes","filter","prop","handleChange","targetValue","target","value","handleMobileChange","addItemToCart","id","title","price","url","item","type","payload","foundItem","existingNum","parseInt","myRefs","current","removeItemFromCart","myCachedTotal","removeItem","preventDefault","post","_id","qty","limit","disabled","limitReached","find","foundId","push","description"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState,useRef} from 'react'\nimport AuthContext from './AuthContext'\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport {fetchAllMasks,filterMasks,changeLimitReached,removeItemFromInventory} from './actions'\nimport {Link,withRouter} from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core/styles';\n\n// reactstrap components\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  CardTitle,\n  CardText,\n  Collapse,\n  Label,\n  FormGroup,\n  Form,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Container,\n  Row,\n  Col,\n  UncontrolledTooltip,\n} from \"reactstrap\";\n\nconst App = ({history}) => {\n    let itemsArr = [];\n    const {state,dispatch} = useContext(AuthContext)\n    const {allMasks,cartItems} = state;\n\n    const [emailFocus, setEmailFocus] = React.useState(false);\n    const [quantity, setQuantities] = useState({})\n    \n    let sessionCartItems = JSON.parse(sessionStorage.getItem('cart'))\n    \n    const [filterValue, setFilterValue] = useState({people:false,animals:false,flowers:false})\n    const [values, setValues] = useState({people:false,animals:false,flowers:false});\n    const mobileSize = useMediaQuery('(max-width:600px)');\n    const tabletSize = useMediaQuery('(max-width:800px)');\n    \n    const arrLength = arr.length;\n    const [elRefs, setElRefs] = React.useState([]);\n\n    useEffect(() => {\n      // add or remove refs\n      setElRefs(elRefs => (\n        Array(arrLength).fill().map((_, i) => elRefs[i] || createRef())\n      ));\n    }, [arrLength]);\n\n    const useStyles = makeStyles(theme => ({\n        paper: {\n          display: 'flex',\n          textAlign: 'center',\n          flexDirection: 'column',\n          padding:'15px',\n          margin:'15px',\n        },\n        avatar: {\n          margin: theme.spacing(1),\n          backgroundColor: theme.palette.secondary.main,\n        },\n        form: {\n          width: '100%', // Fix IE 11 issue.\n          marginTop: theme.spacing(3),\n        },\n        submit: {\n          margin: theme.spacing(3, 0, 2),\n        },\n        paper: {\n          padding: theme.spacing(.25),\n          textAlign: 'center',\n          color: theme.palette.text.secondary,\n        },\n        clickable:{\n          cursor:'pointer',\n          width:'200px',\n          height:'160px',\n          objectFit:'cover',\n          borderRadius:'4x',\n        },\n        scroll:{\n          overflow:'scroll',\n          margin:'15% 0 0 0'\n        },\n        width:{\n          width:0\n        },\n        center:{\n          textAlign:'center'\n        },\n        buttonCenter:{\n          margin:'5px'\n        },\n        fullWidth:{\n          margin:'auto'\n        },\n        buttonMargin:{\n          marginRight:'10px'\n        }\n      }));\n    \n    const classes = useStyles();\n\n    useEffect(() =>{\n        fetchAllMasks(dispatch)\n    },[])\n\n\n    useEffect(() =>{\n      fetchAllMasks(dispatch)\n      if(cartItems && cartItems.length > 0){\n        try{\n            \n            sessionStorage.setItem('cart',JSON.stringify(cartItems))\n            newTotal = cartItems.reduce((acc,cartItem) => acc + cartItem.quantity,0)\n            sessionStorage.setItem('cartTotal',newTotal)\n\n        } catch(e){\n            console.log(\"cartItems is empty\")\n        }\n    }\n    },[cartItems])\n\n    // collapse states and functions\n    const [collapses, setCollapses] = React.useState([1]);\n    const changeCollapse = (collapse) => {\n      if (collapses.includes(collapse)) {\n        setCollapses(collapses.filter((prop) => prop !== collapse));\n      } else {\n        setCollapses([...collapses, collapse]);\n      }\n    };\n\n    const handleChange = e =>{\n      const targetValue = e.target.value;\n      filterMasks(targetValue,dispatch)\n    }\n\n    const handleMobileChange = e =>{\n      const targetValue = e.target.value;\n      filterMasks(targetValue,dispatch)\n\n        if(filterValue[targetValue] == null){\n          setFilterValue({...filterValue,[targetValue]:true})\n        } else{\n          setFilterValue({...filterValue,[targetValue]:!filterValue[targetValue]})\n        }\n    }\n\n    let newTotal;\n\n    const addItemToCart = (id,title,price,url) =>{\n        console.log(state)\n        const item = {id,title,price,url};\n        dispatch({type:\"ADD_ITEM_TO_CART\",payload:item})\n        let foundItem;\n        removeItemFromInventory(id,sessionCartItems)\n\n        let existingNum;\n          if(sessionStorage.getItem(id)){\n            existingNum = parseInt(sessionStorage.getItem(id));\n            console.log(\"existingNum exists\")\n            console.log(existingNum)\n            sessionStorage.setItem(`${id}`,existingNum + 1)\n          } else{\n            console.log(\"existingNum does not exist\")\n            sessionStorage.setItem(`${id}`,1)\n          }\n\n          if(myRefs.current == 2){\n            console.log(\"current ref hit!!\")\n          }\n\n          myRefs.current += 1\n\n          console.log(\"myRefs\")\n          console.log(myRefs)\n    }\n\n    const removeItemFromCart = (id,title,price) =>{\n        const item = {id,title,price};\n        dispatch({type:\"REMOVE_ITEM_FROM_CART\",payload:item})\n        let myCachedTotal = JSON.parse(sessionStorage.getItem('cartTotal'))\n        console.log(\"myCachedTotal:\")\n        console.log(myCachedTotal)\n        if(myCachedTotal == 1){\n            console.log(\"Clear cart\")\n            sessionStorage.removeItem('cart');\n            sessionStorage.setItem('cartTotal',0)\n        }\n        \n            let existingNum = parseInt(sessionStorage.getItem(id));\n            console.log(\"existingNum exists\")\n            console.log(existingNum)\n            sessionStorage.setItem(`${id}`,existingNum - 1)\n\n    }\n\n    return (\n        <>\n      <div className={\"wrapper\",classes.scroll}>\n        <div className={\"main\"}>\n          <div className=\"section\">\n            <Container>\n              {!mobileSize ? (<Button color=\"info\" type=\"button\"><Link to=\"/checkout\">Go To Checkout</Link></Button>) : null}\n              <Row>\n                {mobileSize || tabletSize ? (\n                <div className={classes.fullWidth}>\n                  <Button color={filterValue[\"animals\"] == true ? \"success\" : \"info\"} type=\"button\" className={classes.buttonCenter} value=\"animals\" onClick={e => handleMobileChange(e)}>\n                      Animals\n                  </Button>\n                  <Button color={filterValue[\"flowers\"] == true ? \"success\" : \"info\"} type=\"button\" className={classes.buttonCenter} value=\"flowers\" onClick={e => handleMobileChange(e)}>\n                      Flowers\n                  </Button>\n                  <Button color={filterValue[\"people\"] == true ? \"success\" : \"info\"} type=\"button\" className={classes.buttonCenter} value=\"people\" onClick={e => handleMobileChange(e)}>\n                      People\n                  </Button>\n                </div>\n                ):(\n                  <Col md=\"3\">\n                  <h2 className=\"section-title\">SCC Masks!</h2>\n                  <div className=\"collapse-panel\">\n                    <CardBody>\n                      <Card className=\"card-refine card-plain\">\n                      <CardTitle tag=\"h4\">\n                          Filter Your Masks{\" \"}\n                          <Button\n                            className=\"btn-icon btn-neutral pull-right\"\n                            color=\"default\"\n                            id=\"tooltip633919451\"\n                          >\n                            <i className=\"arrows-1_refresh-69 now-ui-icons\"></i>\n                          </Button>\n                          <UncontrolledTooltip\n                            delay={0}\n                            target=\"tooltip633919451\"\n                          >\n                            Reset Filter\n                          </UncontrolledTooltip>\n                        </CardTitle>\n                        <CardHeader id=\"headingTwo\" role=\"tab\">\n                          <h6>\n                            <a\n                              className=\"text-info\"\n                              aria-expanded={collapses.includes(1)}\n                              data-toggle=\"collapse\"\n                              data-parent=\"#accordion\"\n                              href=\"#pablo\"\n                              onClick={(e) => {\n                                e.preventDefault();\n                                changeCollapse(1);\n                              }}\n                            >\n                              Type{\" \"}\n                              <i className=\"now-ui-icons arrows-1_minimal-down\"></i>\n                            </a>\n                          </h6>\n                        </CardHeader>\n                        <Collapse isOpen={collapses.includes(1)}>\n                          <CardBody>\n                            <FormGroup check>\n                              <Label check>\n                                <Input type=\"checkbox\" value=\"flowers\" onChange={e => handleChange(e)}></Input>\n                                <span className=\"form-check-sign\"></span>\n                                Flowers\n                              </Label>\n                            </FormGroup>\n                            <FormGroup check>\n                              <Label check>\n                                <Input type=\"checkbox\" value=\"animals\" onChange={e => handleChange(e)}></Input>\n                                <span className=\"form-check-sign\"></span>\n                                Animals\n                              </Label>\n                            </FormGroup>\n                            <FormGroup check>\n                              <Label check>\n                                <Input type=\"checkbox\" value=\"people\" onChange={e => handleChange(e)}></Input>\n                                <span className=\"form-check-sign\"></span>\n                                People\n                              </Label>\n                            </FormGroup>\n                          </CardBody>\n                        </Collapse>\n                      </Card>\n                    </CardBody>\n                  </div>\n                </Col>\n                )}\n            <Col md=\"9\">\n                <Row>\n            {allMasks && allMasks.map((post,i) =>{\n                const id = post._id;\n                const title = post.title;\n                const price = post.price;\n                const url = post.url;\n                const quantity = post.quantity;\n                let sessionCartItems = JSON.parse(sessionStorage.getItem('cart'))\n                let qty;\n                let limit;\n                let disabled;\n\n                let limitReached;\n                if(sessionStorage.getItem(id) == post.quantity){\n                    limitReached = true;\n                }\n\n                if(sessionCartItems && sessionCartItems.length > 0){\n                  console.log(id)\n                  console.log(sessionCartItems.find(e => console.log(e)))\n                  let foundId = sessionCartItems.filter(e => e.id == id)\n                  console.log(foundId)\n\n                    qty = sessionCartItems.find((e,i) => e.title == post.title)\n                        try{\n                        disabled = qty.quantity;\n                        console.log(disabled)\n                        } catch(e){\n                            console.log(\"no quantity\")\n                        }\n                }\n\n                return(\n                <>\n                    <Col lg=\"4\" md=\"6\">\n                      <Card className=\"card-product card-plain\">\n                      <div className={\"card-image\",classes.center}>\n                          <a onClick={(e) => history.push(`/product-page/${post._id}`)}>\n                            <img\n                              className={classes.clickable}\n                              alt=\"...\"\n                              src={post.url}\n                            />\n                          </a>\n                        </div>\n                        <CardBody>\n                            <CardTitle tag=\"h4\">{post.title}</CardTitle>\n                            <CardText className=\"card-description\">{post.description}</CardText>\n                                <CardTitle className=\"card-description\">${post.price}</CardTitle>\n                                <CardTitle>\n                                    <Button \n                                        color=\"info\" \n                                        ref={elRefs[i]}\n                                        size={mobileSize || tabletSize  ? \"lg\" : \"regular\"}\n                                        variant=\"contained\"\n                                        disabled={!disabled}\n                                        className={classes.buttonMargin}\n                                        onClick={() => removeItemFromCart(id,title,price,url)}>\n                                          -\n                                      </Button>\n                                      {\"  \"}\n                                    <Button \n                                        color=\"info\" \n                                        ref={elRefs[i]}\n                                        size={mobileSize || tabletSize ? \"lg\" : \"regular\"}\n                                        variant=\"contained\" \n                                        name={id}\n                                        className={classes.buttonMargin}\n                                        disabled={limitReached}\n                                        onClick={e => addItemToCart(id,title,price,url)}>\n                                        +\n                                      </Button>\n                                      <p>{post.limitReached}</p>\n                                </CardTitle>\n                        </CardBody>\n                            <CardFooter>\n                                <CardText className={classes.paper}>Quantity: </CardText>\n                                <CardText className={classes.paper}>{post.quantity}</CardText>\n                            </CardFooter>\n                        </Card>\n                    </Col>\n        </>)})}\n                </Row>\n            </Col>\n    </Row>\n</Container>\n          </div>\n        </div>\n      </div>\n    </>\n        )\n}\n\nexport default withRouter(App)"]},"metadata":{},"sourceType":"module"}