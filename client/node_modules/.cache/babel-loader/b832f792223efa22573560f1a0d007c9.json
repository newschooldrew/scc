{"ast":null,"code":"var _jsxFileName = \"/Users/andrewperez/Documents/projects/scc/client/src/Checkout/Checkout.js\";\n\n/*eslint-disable*/\nimport React, { useContext } from \"react\";\nimport AuthContext from '../AuthContext';\nimport { Link } from 'react-router-dom'; // nodejs library that concatenates classes\n\nimport classNames from \"classnames\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Typography from \"@material-ui/core/Typography\"; // @material-ui/icons\n\nimport Favorite from \"@material-ui/icons/Favorite\";\nimport Close from \"@material-ui/icons/Close\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport Add from \"@material-ui/icons/Add\";\nimport KeyboardArrowRight from \"@material-ui/icons/KeyboardArrowRight\"; // core components\n\nimport Header from \"../Header/Header_Checkout.js\";\nimport HeaderLinks from \"../Header/HeaderLinks.js\";\nimport Parallax from \"../Parallax/Parallax.js\";\nimport Grid from '@material-ui/core/Grid';\nimport GridContainer from \"../Grid/GridContainer.js\";\nimport GridItem from \"../Grid/GridItem.js\"; // import Footer from \"components/Footer/Footer.js\";\n\nimport CheckoutTable from \"../CheckoutTable/CheckoutTable.js\";\nimport Button from \"../CustomButtons/Button.js\";\nimport Card from \"../Card/Card.js\";\nimport CardBody from \"../Card/CardBody.js\";\nimport { totalPrice, totalItemPrice } from '../../utils/cart.utils';\nimport { withRouter } from 'react-router-dom';\nimport shoppingCartStyle from \"../../assets/jss/material-kit-pro-react/views/shoppingCartStyle.js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { getPublicStripeKey } from '../actions';\nimport CheckoutForm from './CheckoutForm';\nconst useStyles = makeStyles(shoppingCartStyle);\n\nfunction ShoppingCartPage({\n  history\n}) {\n  const {\n    state,\n    dispatch\n  } = useContext(AuthContext);\n  const {\n    username,\n    cartItems\n  } = state;\n  const stripePromise = getPublicStripeKey().then(key => {\n    console.log(\"key:\");\n    console.log(key);\n    return loadStripe(key);\n  });\n  React.useEffect(() => {\n    console.log(\"cartItems:\");\n    console.log(cartItems);\n    window.scrollTo(0, 0);\n    document.body.scrollTop = 0;\n  }, []);\n\n  const addItemToCart = (id, title, price) => {\n    console.log(\"add item from cart\");\n    const item = {\n      id,\n      title,\n      price\n    };\n    dispatch({\n      type: \"ADD_ITEM_TO_CART\",\n      payload: item\n    });\n  };\n\n  const goBackToShopping = () => {\n    history.push('/all-meals');\n  };\n\n  const removeItemFromCart = (id, title, price) => {\n    console.log(\"remove item from cart\");\n    const item = {\n      id,\n      title,\n      price\n    };\n    dispatch({\n      type: \"REMOVE_ITEM_FROM_CART\",\n      payload: item\n    });\n    let myCachedTotal = JSON.parse(sessionStorage.getItem('cartTotal'));\n    console.log(\"myCachedTotal:\");\n    console.log(myCachedTotal);\n\n    if (myCachedTotal == 1) {\n      console.log(\"Clear cart\");\n      sessionStorage.removeItem('cart');\n      sessionStorage.setItem('cartTotal', 0);\n    }\n  };\n\n  const handleClick = item => {\n    let cartCount = JSON.parse(sessionStorage.getItem('cart'));\n\n    if (cartCount && cartCount.length == 1) {\n      sessionStorage.removeItem('cart');\n      sessionStorage.setItem('cartTotal', 0);\n    } else {\n      dispatch({\n        type: \"CLEAR_CART\",\n        payload: item\n      });\n    }\n  };\n\n  let sessionItems = JSON.parse(sessionStorage.getItem('cart'));\n  if (!cartItems && !sessionItems) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 41\n    }\n  }, \"loading checkout items\");\n  const classes = useStyles();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Parallax, {\n    image: require(\"../assets/img/bg3.jpg\"),\n    filter: \"dark\",\n    small: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(GridContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GridItem, {\n    md: 8,\n    sm: 8,\n    className: classNames(classes.mlAuto, classes.mrAuto, classes.textCenter),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: classes.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \"Your Cart\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(classes.main, classes.mainRaised),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    plain: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    plain: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"info\",\n    onClick: () => goBackToShopping(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, \"Back to Shopping\"), (() => {\n    if (sessionItems && sessionItems.length > 0) {\n      // let cartItemCount = sessionStorage.getItem('cartTotal')\n      let cartItemCount = JSON.parse(sessionStorage.getItem('cart'));\n      console.log(\"sessionItems function:\");\n      console.log(sessionItems);\n      return sessionItems.map((item, idx) => {\n        console.log(\"item.url:\");\n        console.log(item.url);\n        console.log(\"cartItemCount[idx].quantity:\");\n        console.log(cartItemCount[idx]);\n        const {\n          id,\n          title,\n          price\n        } = item;\n        return /*#__PURE__*/React.createElement(CheckoutTable, {\n          key: id,\n          tableHead: [\"\", \"PRODUCT\", \"COLOR\", \"SIZE\", \"PRICE\", \"QTY\", \"AMOUNT\", \"\"],\n          tableData: [[/*#__PURE__*/React.createElement(\"div\", {\n            className: classes.imgContainer,\n            key: 1,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 37\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: item.url,\n            alt: \"...\",\n            className: classes.img,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 37\n            }\n          })), /*#__PURE__*/React.createElement(\"span\", {\n            key: 1,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            href: \"#jacket\",\n            className: classes.tdNameAnchor,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 41\n            }\n          }, item.title), /*#__PURE__*/React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 41\n            }\n          }), /*#__PURE__*/React.createElement(\"small\", {\n            className: classes.tdNameSmall,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 41\n            }\n          }, item.description)), \"Red\", \"M\", /*#__PURE__*/React.createElement(\"span\", {\n            key: 1,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 39\n            }\n          }, /*#__PURE__*/React.createElement(\"small\", {\n            className: classes.tdNumberSmall,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 41\n            }\n          }, \"$\"), \" \", item.price), /*#__PURE__*/React.createElement(\"span\", {\n            key: 1,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 39\n            }\n          }, ` `, /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.buttonGroup,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(Button, {\n            color: \"info\",\n            size: \"sm\",\n            round: true,\n            className: classes.firstButton,\n            onClick: () => removeItemFromCart(id, title, price),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 43\n            }\n          }, /*#__PURE__*/React.createElement(Remove, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 45\n            }\n          })), cartItemCount[idx].quantity, /*#__PURE__*/React.createElement(Button, {\n            color: \"info\",\n            size: \"sm\",\n            round: true,\n            className: classes.lastButton,\n            onClick: () => addItemToCart(id, title, price),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 43\n            }\n          }, /*#__PURE__*/React.createElement(Add, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 45\n            }\n          })))), /*#__PURE__*/React.createElement(\"span\", {\n            key: 1,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 39\n            }\n          }, /*#__PURE__*/React.createElement(\"small\", {\n            className: classes.tdNumberSmall,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 41\n            }\n          }, \"$\"), \" \", totalItemPrice(item)), /*#__PURE__*/React.createElement(Tooltip, {\n            key: 1,\n            id: \"close1\",\n            title: \"Remove item\",\n            placement: \"left\",\n            classes: {\n              tooltip: classes.tooltip\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 39\n            }\n          }, /*#__PURE__*/React.createElement(Button, {\n            link: true,\n            className: classes.actionButton,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(Close, {\n            onClick: () => handleClick(item),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 43\n            }\n          })))]],\n          tableShopping: true,\n          customHeadCellClasses: [classes.textCenter, classes.description, classes.description, classes.textRight, classes.textRight, classes.textRight],\n          customHeadClassesForCells: [0, 2, 3, 4, 5, 6],\n          customCellClasses: [classes.tdName, classes.customFont, classes.customFont, classes.tdNumber, classes.tdNumber + \" \" + classes.tdNumberAndButtonGroup, classes.tdNumber + \" \" + classes.textCenter],\n          customClassesForCells: [1, 2, 3, 4, 5, 6],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 37\n          }\n        });\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 53\n        }\n      }, \"No items left in this cart\");\n    }\n  })(), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 39\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 41\n    }\n  }, \"Total\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 43\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 45\n    }\n  }, \"$\"), totalPrice(sessionItems || cartItems))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 43\n    }\n  }, /*#__PURE__*/React.createElement(Elements, {\n    stripe: stripePromise,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(CheckoutForm, {\n    price: totalPrice(sessionItems || cartItems),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 43\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 41\n    }\n  }))))));\n}\n\nexport default withRouter(ShoppingCartPage);","map":{"version":3,"sources":["/Users/andrewperez/Documents/projects/scc/client/src/Checkout/Checkout.js"],"names":["React","useContext","AuthContext","Link","classNames","makeStyles","List","ListItem","Tooltip","Typography","Favorite","Close","Remove","Add","KeyboardArrowRight","Header","HeaderLinks","Parallax","Grid","GridContainer","GridItem","CheckoutTable","Button","Card","CardBody","totalPrice","totalItemPrice","withRouter","shoppingCartStyle","loadStripe","Elements","getPublicStripeKey","CheckoutForm","useStyles","ShoppingCartPage","history","state","dispatch","username","cartItems","stripePromise","then","key","console","log","useEffect","window","scrollTo","document","body","scrollTop","addItemToCart","id","title","price","item","type","payload","goBackToShopping","push","removeItemFromCart","myCachedTotal","JSON","parse","sessionStorage","getItem","removeItem","setItem","handleClick","cartCount","length","sessionItems","classes","require","container","mlAuto","mrAuto","textCenter","main","mainRaised","cartItemCount","map","idx","url","imgContainer","img","tdNameAnchor","tdNameSmall","description","tdNumberSmall","buttonGroup","firstButton","quantity","lastButton","tooltip","actionButton","textRight","tdName","customFont","tdNumber","tdNumberAndButtonGroup"],"mappings":"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","sourcesContent":["/*eslint-disable*/\nimport React, {useContext} from \"react\";\nimport AuthContext from '../AuthContext'\nimport {Link} from 'react-router-dom'\n// nodejs library that concatenates classes\nimport classNames from \"classnames\";\n// @material-ui/core components\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Typography from \"@material-ui/core/Typography\";\n// @material-ui/icons\nimport Favorite from \"@material-ui/icons/Favorite\";\nimport Close from \"@material-ui/icons/Close\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport Add from \"@material-ui/icons/Add\";\nimport KeyboardArrowRight from \"@material-ui/icons/KeyboardArrowRight\";\n// core components\nimport Header from \"../Header/Header_Checkout.js\";\nimport HeaderLinks from \"../Header/HeaderLinks.js\";\nimport Parallax from \"../Parallax/Parallax.js\";\nimport Grid from '@material-ui/core/Grid';\nimport GridContainer from \"../Grid/GridContainer.js\";\nimport GridItem from \"../Grid/GridItem.js\";\n// import Footer from \"components/Footer/Footer.js\";\nimport CheckoutTable from \"../CheckoutTable/CheckoutTable.js\";\nimport Button from \"../CustomButtons/Button.js\";\nimport Card from \"../Card/Card.js\";\nimport CardBody from \"../Card/CardBody.js\";\nimport {totalPrice,totalItemPrice} from '../../utils/cart.utils'\nimport {withRouter} from 'react-router-dom'\nimport shoppingCartStyle from \"../../assets/jss/material-kit-pro-react/views/shoppingCartStyle.js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport {getPublicStripeKey} from '../actions'\nimport CheckoutForm from './CheckoutForm'\n\nconst useStyles = makeStyles(shoppingCartStyle);\n\nfunction ShoppingCartPage({history}) {\n  const {state,dispatch} = useContext(AuthContext)\n  const {username,cartItems} = state;\n  const stripePromise = getPublicStripeKey().then(key => {\n    console.log(\"key:\")\n    console.log(key)\n    return loadStripe(key)\n  });\n\n  React.useEffect(() => {\n    console.log(\"cartItems:\")\n    console.log(cartItems)\n    window.scrollTo(0, 0);\n    document.body.scrollTop = 0;\n  },[]);\n\n  const addItemToCart = (id,title,price) =>{\n    console.log(\"add item from cart\")\n    const item = {id,title,price};\n    dispatch({type:\"ADD_ITEM_TO_CART\",payload:item})\n}\n\nconst goBackToShopping = () =>{\n  history.push('/all-meals')\n}\n\nconst removeItemFromCart = (id,title,price) =>{\n  console.log(\"remove item from cart\")\n  const item = {id,title,price};\n  dispatch({type:\"REMOVE_ITEM_FROM_CART\",payload:item})\n  let myCachedTotal = JSON.parse(sessionStorage.getItem('cartTotal'))\n  console.log(\"myCachedTotal:\")\n  console.log(myCachedTotal)\n  if(myCachedTotal == 1){\n      console.log(\"Clear cart\")\n      sessionStorage.removeItem('cart');\n      sessionStorage.setItem('cartTotal',0)\n  }\n}\n\n  const handleClick = item =>{\n    let cartCount = JSON.parse(sessionStorage.getItem('cart'))\n    if(cartCount && cartCount.length == 1){\n        sessionStorage.removeItem('cart');\n        sessionStorage.setItem('cartTotal',0)\n    }else{\n        dispatch({type:\"CLEAR_CART\",payload:item})\n    }\n}\n\nlet sessionItems = JSON.parse(sessionStorage.getItem('cart'))\nif(!cartItems && !sessionItems) return (<div>loading checkout items</div>)\n\n  const classes = useStyles();\n  return (\n    <div>\n      <Parallax\n        image={require(\"../assets/img/bg3.jpg\")}\n        filter=\"dark\"\n        small\n      >\n        <div className={classes.container}>\n          <GridContainer>\n            <GridItem\n              md={8}\n              sm={8}\n              className={classNames(\n                classes.mlAuto,\n                classes.mrAuto,\n                classes.textCenter\n              )}\n            >\n              <h2 className={classes.title}>Your Cart</h2>\n            </GridItem>\n          </GridContainer>\n        </div>\n      </Parallax>\n\n                    <div className={classNames(classes.main, classes.mainRaised)}>\n                      <div className={classes.container}>\n                        <Card plain>\n                          <CardBody plain>\n                            {/* <h3 className={classes.cardTitle}>Shopping Cart</h3> */}\n                            <Button color=\"info\" onClick={() => goBackToShopping()}>Back to Shopping</Button>\n                    {(() => {\n                    if(sessionItems && sessionItems.length > 0){\n                      // let cartItemCount = sessionStorage.getItem('cartTotal')\n                      let cartItemCount = JSON.parse(sessionStorage.getItem('cart'))\n                      console.log(\"sessionItems function:\")\n                      console.log(sessionItems)\n                      return(\n                        sessionItems.map((item,idx) =>{\n                          console.log(\"item.url:\")\n                          console.log(item.url)\n                          console.log(\"cartItemCount[idx].quantity:\")\n                          console.log(cartItemCount[idx])\n                                          const {id,title,price} = item;\n                                            return(\n                                    <CheckoutTable\n                                    key={id}\n                                      tableHead={[\n                                        \"\",\n                                        \"PRODUCT\",\n                                        \"COLOR\",\n                                        \"SIZE\",\n                                        \"PRICE\",\n                                        \"QTY\",\n                                        \"AMOUNT\",\n                                        \"\"\n                                      ]}\n                                    tableData={[\n                                      [  \n                                    <div className={classes.imgContainer} key={1}>\n                                    <img src={item.url} alt=\"...\" className={classes.img} />\n                                      </div>,\n                                        <span key={1}>\n                                        <a href=\"#jacket\" className={classes.tdNameAnchor}>\n                                          {item.title}\n                                        </a>\n                                        <br />\n                                        <small className={classes.tdNameSmall}>\n                                          {item.description}\n                                        </small>\n                                      </span>,\n                                      \"Red\",\n                                      \"M\",\n                                      <span key={1}>\n                                        <small className={classes.tdNumberSmall}>$</small> {item.price}\n                                      </span>,\n                                      <span key={1}>\n                                        {` `}\n                                        <div className={classes.buttonGroup}>\n                                          <Button\n                                            color=\"info\"\n                                            size=\"sm\"\n                                            round\n                                            className={classes.firstButton}\n                                            onClick={() => removeItemFromCart(id,title,price)}\n                                          >\n                                            <Remove />\n                                          </Button>\n                                          \n                          {cartItemCount[idx].quantity}\n                                          <Button\n                                            color=\"info\"\n                                            size=\"sm\"\n                                            round\n                                            className={classes.lastButton}\n                                            onClick={() => addItemToCart(id,title,price)}\n                                          >\n                                            <Add />\n                                          </Button>\n                                        </div>\n                                      </span>,\n                                      <span key={1}>\n                                        <small className={classes.tdNumberSmall}>$</small> {totalItemPrice(item)}\n                                      </span>,\n                                      <Tooltip\n                                        key={1}\n                                        id=\"close1\"\n                                        title=\"Remove item\"\n                                        placement=\"left\"\n                                        classes={{ tooltip: classes.tooltip }}\n                                      >\n                                        <Button link className={classes.actionButton}>\n                                          <Close  onClick={() => handleClick(item)}/>\n                                        </Button>\n                                      </Tooltip>\n                                    ]   \n                                    ]}\n                                    tableShopping\n                                          customHeadCellClasses={[\n                                            classes.textCenter,\n                                            classes.description,\n                                            classes.description,\n                                            classes.textRight,\n                                            classes.textRight,\n                                            classes.textRight\n                                          ]}\n                                          customHeadClassesForCells={[0, 2, 3, 4, 5, 6]}\n                                          customCellClasses={[\n                                            classes.tdName,\n                                            classes.customFont,\n                                            classes.customFont,\n                                            classes.tdNumber,\n                                            classes.tdNumber + \" \" + classes.tdNumberAndButtonGroup,\n                                            classes.tdNumber + \" \" + classes.textCenter\n                                          ]}\n                                          customClassesForCells={[1, 2, 3, 4, 5, 6]}\n                                        />\n                                            )\n                                          })\n                                         )\n                                      }else {return <span>No items left in this cart</span>}\n                                    })()\n                                    }\n                                      <Grid item xs={3}></Grid>\n                                      <Grid item xs={3}>\n                                        <Typography>Total</Typography>                        \n                                      </Grid>\n                                      <Grid item xs={3}>        \n                                          <span >\n                                            <small>$</small>{totalPrice(sessionItems||cartItems)}\n                                          </span>\n                                        </Grid>\n                                        <Grid item xs={3}>\n                                          </Grid>\n                                          <Grid item xs={6}>\n                                        <Elements stripe={stripePromise}>\n                                          <CheckoutForm price={totalPrice(sessionItems||cartItems)} />\n                                        </Elements>\n                                        </Grid>\n                                        <Grid item xs={3}>\n                                          </Grid>\n                                      </CardBody>\n                                    </Card>\n                                    </div>\n                                    </div>\n                            </div>)}\nexport default withRouter(ShoppingCartPage)"]},"metadata":{},"sourceType":"module"}