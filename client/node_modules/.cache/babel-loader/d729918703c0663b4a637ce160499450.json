{"ast":null,"code":"/*eslint-disable*/import React,{useContext}from\"react\";import AuthContext from'../AuthContext';import{Link}from'react-router-dom';// nodejs library that concatenates classes\nimport classNames from\"classnames\";// @material-ui/core components\nimport{makeStyles}from\"@material-ui/core/styles\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import Tooltip from\"@material-ui/core/Tooltip\";import Typography from\"@material-ui/core/Typography\";// @material-ui/icons\nimport Favorite from\"@material-ui/icons/Favorite\";import Close from\"@material-ui/icons/Close\";import Remove from\"@material-ui/icons/Remove\";import Add from\"@material-ui/icons/Add\";import KeyboardArrowRight from\"@material-ui/icons/KeyboardArrowRight\";// core components\nimport Header from\"../Header/Header_Checkout.js\";import HeaderLinks from\"../Header/HeaderLinks.js\";import Parallax from\"../Parallax/Parallax.js\";import Grid from'@material-ui/core/Grid';import GridContainer from\"../Grid/GridContainer.js\";import GridItem from\"../Grid/GridItem.js\";// import Footer from \"components/Footer/Footer.js\";\nimport CheckoutTable from\"../CheckoutTable/CheckoutTable.js\";import Button from\"../CustomButtons/Button.js\";import Card from\"../Card/Card.js\";import CardBody from\"../Card/CardBody.js\";import{totalPrice,totalItemPrice}from'../cart.utils';import{withRouter}from'react-router-dom';import shoppingCartStyle from\"../assets/jss/material-kit-pro-react/views/shoppingCartStyle.js\";import{loadStripe}from\"@stripe/stripe-js\";import{Elements}from\"@stripe/react-stripe-js\";import{fetchAllMasks,getPublicStripeKey}from'../actions';import CheckoutForm from'./CheckoutForm';import{ButtonGroup,Table,UncontrolledTooltip}from\"reactstrap\";import useMediaQuery from'@material-ui/core/useMediaQuery';var useStyles=makeStyles(shoppingCartStyle);function ShoppingCartPage(_ref){var history=_ref.history;var _useContext=useContext(AuthContext),state=_useContext.state,dispatch=_useContext.dispatch;var allMasks=state.allMasks,cartItems=state.cartItems;var mobileSize=useMediaQuery('(max-width:600px)');var stripePromise=getPublicStripeKey().then(function(key){console.log(\"key:\");console.log(key);return loadStripe(key);});React.useEffect(function(){console.log(\"cartItems:\");console.log(cartItems);window.scrollTo(0,0);document.body.scrollTop=0;fetchAllMasks(dispatch);},[]);var limitReached;var addItemToCart=function addItemToCart(id,title,price){console.log(\"add item from cart\");var item={id:id,title:title,price:price};dispatch({type:\"ADD_ITEM_TO_CART\",payload:item});console.log(\"add item to cart in checkout being hit\");if(sessionStorage.getItem(id)){var existingNum=parseInt(sessionStorage.getItem(id));console.log(\"existingNum exists\");console.log(existingNum);sessionStorage.setItem(\"\".concat(id),existingNum+1);}else{console.log(\"no luck this time\");}};var goBackToShopping=function goBackToShopping(){history.push('/');};var removeItemFromCart=function removeItemFromCart(id,title,price){console.log(\"remove item from cart\");var item={id:id,title:title,price:price};dispatch({type:\"REMOVE_ITEM_FROM_CART\",payload:item});var myCachedTotal=JSON.parse(sessionStorage.getItem('cartTotal'));console.log(\"myCachedTotal:\");console.log(myCachedTotal);if(myCachedTotal==1){console.log(\"Clear cart\");sessionStorage.removeItem('cart');sessionStorage.setItem('cartTotal',0);}var existingNum=parseInt(sessionStorage.getItem(id));console.log(\"existingNum exists\");console.log(existingNum);sessionStorage.setItem(\"\".concat(id),existingNum-1);};var handleClick=function handleClick(item){var cartCount=JSON.parse(sessionStorage.getItem('cart'));if(cartCount&&cartCount.length==1){sessionStorage.removeItem('cart');sessionStorage.setItem('cartTotal',0);}else{dispatch({type:\"CLEAR_CART\",payload:item});}};var totalPriceDivStyle={width:'100%',display:'flex',flexDirection:'row'};var totalPriceOuterStyle={width:'10%',justifyContent:'spaceBetween'};var quantityStyle={textAlign:'center'};var totalPriceStyle={width:'80%',textAlign:'center',justifyContent:'spaceBetween',fontSize:'3em'};var noItemsMargin={margin:'10% 0 0 0'};var itemDiv={width:'80%',textAlgin:'center',fontSize:'1.5em',display:'flex',textAlign:'center',margin:'auto',flexDirection:'column'};var innerItemDiv={justifyContent:'spaceBetween',width:'10%'};var lineItem={display:'inlineBlock'};var classes=useStyles();var sessionItems=JSON.parse(sessionStorage.getItem('cart'));var maskTotal=totalPrice(sessionItems||cartItems);var trueTotal=parseFloat(maskTotal)+5.00;if(!cartItems&&!sessionItems)return/*#__PURE__*/React.createElement(\"div\",null,\"loading checkout items\");return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Parallax,{image:require(\"../assets/img/bg3.jpg\"),filter:\"dark\",small:true},/*#__PURE__*/React.createElement(\"div\",{className:classes.container},/*#__PURE__*/React.createElement(GridContainer,null,/*#__PURE__*/React.createElement(GridItem,{md:8,sm:8,className:classNames(classes.mlAuto,classes.mrAuto,classes.textCenter)},/*#__PURE__*/React.createElement(\"h2\",{className:classes.title},\"Your Cart\"))))),/*#__PURE__*/React.createElement(\"div\",{className:classNames(classes.main,classes.mainRaised)},/*#__PURE__*/React.createElement(\"div\",{className:classes.container},/*#__PURE__*/React.createElement(Card,{plain:true},/*#__PURE__*/React.createElement(CardBody,{plain:true},/*#__PURE__*/React.createElement(Button,{color:\"info\",onClick:function onClick(){return goBackToShopping();}},\"Back to Shopping\"),function(){if(sessionItems&&sessionItems.length>0){var cartItemCount=JSON.parse(sessionStorage.getItem('cart'));var matchCartItemArr=[];return sessionItems.map(function(item,idx){var id=item.id,title=item.title,price=item.price,quantity=item.quantity;var limitReached;console.log(\"quantity:\");console.log(quantity);if(allMasks){allMasks.map(function(mask){if(mask._id==id){matchCartItemArr.push(mask);}console.log(\"matchCartItemArr:\");console.log(matchCartItemArr);});}var currentItem=matchCartItemArr.filter(function(item){return item._id==id;});var tableHeadData;if(!mobileSize){tableHeadData=[\"\",\"PRODUCT\",\"PRICE\",\"QTY\",\"AMOUNT\",\"\"];}else{tableHeadData=[\"\",\"PRICE\",\"QTY\",\"AMOUNT\",\"\"];}var tableData=[/*#__PURE__*/ // image\nReact.createElement(\"div\",{className:classes.imgContainer,key:1},/*#__PURE__*/React.createElement(\"img\",{src:item.url,alt:\"...\",className:classes.img})),/*#__PURE__*/ // PRODUCT\nReact.createElement(\"span\",{key:1},/*#__PURE__*/React.createElement(\"a\",{href:\"#jacket\",className:classes.tdNameAnchor},item.title),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"small\",{className:classes.tdNameSmall},item.description)),/*#__PURE__*/ // PRICE\nReact.createElement(\"span\",{key:1},/*#__PURE__*/React.createElement(\"small\",{className:classes.tdNumberSmall},\"$\"),\" \",item.price),/*#__PURE__*/ // QTY\nReact.createElement(\"span\",{key:1},\" \",/*#__PURE__*/React.createElement(\"div\",{className:classes.buttonGroup},/*#__PURE__*/React.createElement(Button,{color:\"info\",size:\"sm\",round:true,disabled:currentItem[0].quantity==quantity,onClick:function onClick(){return addItemToCart(id,title,price);}},/*#__PURE__*/React.createElement(\"i\",{className:\"now-ui-icons ui-1_simple-add\"})),/*#__PURE__*/React.createElement(\"p\",{style:quantityStyle},cartItemCount[idx].quantity),/*#__PURE__*/React.createElement(Button,{color:\"info\",size:\"sm\",round:true,onClick:function onClick(){return removeItemFromCart(id,title,price);}},/*#__PURE__*/React.createElement(\"i\",{className:\"now-ui-icons ui-1_simple-delete\"})))),/*#__PURE__*/ // AMOUNT\nReact.createElement(\"span\",{key:1},/*#__PURE__*/React.createElement(\"small\",{className:classes.tdNumberSmall},\"$\"),\" \",totalItemPrice(item)),/*#__PURE__*/React.createElement(Tooltip,{key:1,id:\"close1\",title:\"Remove item\",placement:\"left\",classes:{tooltip:classes.tooltip}},/*#__PURE__*/React.createElement(Button,{link:true,className:classes.actionButton},/*#__PURE__*/React.createElement(Close,{onClick:function onClick(){return handleClick(item);}})))];if(mobileSize){tableData=tableData.filter(function(data,idx){if(idx!==1){return data;}});}return/*#__PURE__*/React.createElement(CheckoutTable,{key:id,tableHead:tableHeadData,tableData:[tableData]});})// end of sessionItems map\n;}// end of sessionItems length\nelse{return/*#__PURE__*/React.createElement(\"p\",{style:noItemsMargin},\"No items left in this cart\");}}(),/*#__PURE__*/React.createElement(\"div\",{style:itemDiv},/*#__PURE__*/React.createElement(\"div\",{style:innerItemDiv}),/*#__PURE__*/React.createElement(\"div\",{style:lineItem},/*#__PURE__*/React.createElement(\"p\",null,\" Mask: $\",maskTotal)),/*#__PURE__*/React.createElement(\"div\",{style:lineItem},/*#__PURE__*/React.createElement(\"p\",null,\"Shipping: $5\")),/*#__PURE__*/React.createElement(\"div\",{style:innerItemDiv})),/*#__PURE__*/React.createElement(\"div\",{style:totalPriceDivStyle},/*#__PURE__*/React.createElement(\"div\",{style:totalPriceOuterStyle}),/*#__PURE__*/React.createElement(\"p\",{style:totalPriceStyle},\"Total: $\",trueTotal.toFixed(2)),/*#__PURE__*/React.createElement(\"div\",{style:totalPriceOuterStyle})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(Elements,{stripe:stripePromise},/*#__PURE__*/React.createElement(CheckoutForm,{price:trueTotal}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3}))))));}export default withRouter(ShoppingCartPage);","map":{"version":3,"sources":["/Users/andrewperez/Documents/projects/scc/client/src/Checkout/Checkout.js"],"names":["React","useContext","AuthContext","Link","classNames","makeStyles","List","ListItem","Tooltip","Typography","Favorite","Close","Remove","Add","KeyboardArrowRight","Header","HeaderLinks","Parallax","Grid","GridContainer","GridItem","CheckoutTable","Button","Card","CardBody","totalPrice","totalItemPrice","withRouter","shoppingCartStyle","loadStripe","Elements","fetchAllMasks","getPublicStripeKey","CheckoutForm","ButtonGroup","Table","UncontrolledTooltip","useMediaQuery","useStyles","ShoppingCartPage","history","state","dispatch","allMasks","cartItems","mobileSize","stripePromise","then","key","console","log","useEffect","window","scrollTo","document","body","scrollTop","limitReached","addItemToCart","id","title","price","item","type","payload","sessionStorage","getItem","existingNum","parseInt","setItem","goBackToShopping","push","removeItemFromCart","myCachedTotal","JSON","parse","removeItem","handleClick","cartCount","length","totalPriceDivStyle","width","display","flexDirection","totalPriceOuterStyle","justifyContent","quantityStyle","textAlign","totalPriceStyle","fontSize","noItemsMargin","margin","itemDiv","textAlgin","innerItemDiv","lineItem","classes","sessionItems","maskTotal","trueTotal","parseFloat","require","container","mlAuto","mrAuto","textCenter","main","mainRaised","cartItemCount","matchCartItemArr","map","idx","quantity","mask","_id","currentItem","filter","tableHeadData","tableData","imgContainer","url","img","tdNameAnchor","tdNameSmall","description","tdNumberSmall","buttonGroup","tooltip","actionButton","data","toFixed"],"mappings":"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","sourcesContent":["/*eslint-disable*/\nimport React, {useContext} from \"react\";\nimport AuthContext from '../AuthContext'\nimport {Link} from 'react-router-dom'\n// nodejs library that concatenates classes\nimport classNames from \"classnames\";\n// @material-ui/core components\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Typography from \"@material-ui/core/Typography\";\n// @material-ui/icons\nimport Favorite from \"@material-ui/icons/Favorite\";\nimport Close from \"@material-ui/icons/Close\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport Add from \"@material-ui/icons/Add\";\nimport KeyboardArrowRight from \"@material-ui/icons/KeyboardArrowRight\";\n// core components\nimport Header from \"../Header/Header_Checkout.js\";\nimport HeaderLinks from \"../Header/HeaderLinks.js\";\nimport Parallax from \"../Parallax/Parallax.js\";\nimport Grid from '@material-ui/core/Grid';\nimport GridContainer from \"../Grid/GridContainer.js\";\nimport GridItem from \"../Grid/GridItem.js\";\n// import Footer from \"components/Footer/Footer.js\";\nimport CheckoutTable from \"../CheckoutTable/CheckoutTable.js\";\nimport Button from \"../CustomButtons/Button.js\";\nimport Card from \"../Card/Card.js\";\nimport CardBody from \"../Card/CardBody.js\";\nimport {totalPrice,totalItemPrice} from '../cart.utils'\nimport {withRouter} from 'react-router-dom'\nimport shoppingCartStyle from \"../assets/jss/material-kit-pro-react/views/shoppingCartStyle.js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport {fetchAllMasks,getPublicStripeKey} from '../actions'\nimport CheckoutForm from './CheckoutForm'\nimport { ButtonGroup, Table, UncontrolledTooltip } from \"reactstrap\";\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nconst useStyles = makeStyles(shoppingCartStyle);\n\nfunction ShoppingCartPage({history}) {\n  const {state,dispatch} = useContext(AuthContext)\n  const {allMasks,cartItems} = state;\n  const mobileSize = useMediaQuery('(max-width:600px)');\n  const stripePromise = getPublicStripeKey().then(key => {\n    console.log(\"key:\")\n    console.log(key)\n    return loadStripe(key)\n  });\n\n  React.useEffect(() => {\n    console.log(\"cartItems:\")\n    console.log(cartItems)\n    window.scrollTo(0, 0);\n    document.body.scrollTop = 0;\n    fetchAllMasks(dispatch)\n  },[]);\n\n  let limitReached;\n\n  const addItemToCart = (id,title,price) =>{\n    console.log(\"add item from cart\")\n    const item = {id,title,price};\n    dispatch({type:\"ADD_ITEM_TO_CART\",payload:item})\n    console.log(\"add item to cart in checkout being hit\")\n    if(sessionStorage.getItem(id)){\n      let existingNum = parseInt(sessionStorage.getItem(id));\n      console.log(\"existingNum exists\")\n      console.log(existingNum)\n      sessionStorage.setItem(`${id}`,existingNum + 1)\n    } else{console.log(\"no luck this time\")}\n}\n\nconst goBackToShopping = () =>{\n  history.push('/')\n}\n\nconst removeItemFromCart = (id,title,price) =>{\n  console.log(\"remove item from cart\")\n  const item = {id,title,price};\n  dispatch({type:\"REMOVE_ITEM_FROM_CART\",payload:item})\n  let myCachedTotal = JSON.parse(sessionStorage.getItem('cartTotal'))\n  console.log(\"myCachedTotal:\")\n  console.log(myCachedTotal)\n  if(myCachedTotal == 1){\n      console.log(\"Clear cart\")\n      sessionStorage.removeItem('cart');\n      sessionStorage.setItem('cartTotal',0)\n  }\n    let existingNum = parseInt(sessionStorage.getItem(id));\n    console.log(\"existingNum exists\")\n    console.log(existingNum)\n    sessionStorage.setItem(`${id}`,existingNum - 1)\n}\n\n  const handleClick = item =>{\n    let cartCount = JSON.parse(sessionStorage.getItem('cart'))\n    if(cartCount && cartCount.length == 1){\n        sessionStorage.removeItem('cart');\n        sessionStorage.setItem('cartTotal',0)\n    }else{\n        dispatch({type:\"CLEAR_CART\",payload:item})\n    }\n}\n\nconst totalPriceDivStyle = {\n  width:'100%',\n  display:'flex',\n  flexDirection:'row'\n}\n\nconst totalPriceOuterStyle = {\n  width:'10%',\n  justifyContent:'spaceBetween',\n}\n\nconst quantityStyle = {\n  textAlign:'center'\n}\nconst totalPriceStyle = {\n  width:'80%',\n  textAlign:'center',\n  justifyContent:'spaceBetween',\n  fontSize:'3em'\n}\n\nconst noItemsMargin = {\n    margin:'10% 0 0 0'\n}\n\nconst itemDiv = {\n    width:'80%',\n    textAlgin:'center',\n    fontSize:'1.5em',\n    display:'flex',\n    textAlign: 'center',\n    margin: 'auto',\n    flexDirection:'column'\n}\n\nconst innerItemDiv = {\n    justifyContent:'spaceBetween',\n    width:'10%',\n}\n\nconst lineItem = {\n    display:'inlineBlock',\n}\n\nconst classes = useStyles();\nlet sessionItems = JSON.parse(sessionStorage.getItem('cart'))\nlet maskTotal = totalPrice(sessionItems||cartItems);\nlet trueTotal = parseFloat(maskTotal) + 5.00;\nif(!cartItems && !sessionItems) return (<div>loading checkout items</div>)\n\n  return (\n    <div>\n      <Parallax\n        image={require(\"../assets/img/bg3.jpg\")}\n        filter=\"dark\"\n        small\n      >\n        <div className={classes.container}>\n          <GridContainer>\n            <GridItem\n              md={8}\n              sm={8}\n              className={classNames(\n                classes.mlAuto,\n                classes.mrAuto,\n                classes.textCenter\n              )}\n            >\n              <h2 className={classes.title}>Your Cart</h2>\n            </GridItem>\n          </GridContainer>\n        </div>\n      </Parallax>\n\n                    <div className={classNames(classes.main, classes.mainRaised)}>\n                      <div className={classes.container}>\n                        <Card plain>\n                          <CardBody plain>\n                            {/* <h3 className={classes.cardTitle}>Shopping Cart</h3> */}\n                            <Button color=\"info\" onClick={() => goBackToShopping()}>Back to Shopping</Button>\n                    {(() => {\n\n                    if(sessionItems && sessionItems.length > 0){\n                      \n                      let cartItemCount = JSON.parse(sessionStorage.getItem('cart'))\n                      let matchCartItemArr = [];\n\n                      return(\n                        sessionItems.map((item,idx) =>{\n                          const {id,title,price,quantity} = item;\n                          let limitReached;\n                          console.log(\"quantity:\")\n                          console.log(quantity)\n\n                          if(allMasks){\n                          allMasks.map(mask =>{\n                            if(mask._id == id){ \n                              matchCartItemArr.push(mask)\n                            }\n                            console.log(\"matchCartItemArr:\")\n                            console.log(matchCartItemArr)\n                          })\n                        }\n                          let currentItem = matchCartItemArr.filter(item => item._id == id)\n                      \n                          let tableHeadData;\n\n                          if(!mobileSize){\n                            tableHeadData = [\n                              \"\",\n                              \"PRODUCT\",\n                              \"PRICE\",\n                              \"QTY\",\n                              \"AMOUNT\",\n                              \"\"\n                            ]\n                          } else{\n                            tableHeadData = [\n                              \"\",\n                              \"PRICE\",\n                              \"QTY\",\n                              \"AMOUNT\",\n                              \"\"\n                            ]                            \n                          }\n\n                            let tableData = [  \n                              // image\n                                      <div className={classes.imgContainer} key={1}>\n                                      <img src={item.url} alt=\"...\" className={classes.img} />\n                                        </div>,\n                              // PRODUCT\n                                          <span key={1}>\n                                          <a href=\"#jacket\" className={classes.tdNameAnchor}>\n                                            {item.title}\n                                          </a>\n                                          <br />\n                                          <small className={classes.tdNameSmall}>\n                                            {item.description}\n                                          </small>\n                                        </span>,\n                              // PRICE\n                                        <span key={1}>\n                                          <small className={classes.tdNumberSmall}>$</small> {item.price}\n                                        </span>,\n                            // QTY\n                                        <span key={1}>\n                                          {` `}\n                                          <div className={classes.buttonGroup}>\n                                          \n                                            <Button\n                                              color=\"info\"\n                                              size=\"sm\"\n                                              round\n                                              disabled={currentItem[0].quantity == quantity}\n                                              onClick={() => addItemToCart(id,title,price)}\n                                            >\n                                              <i className=\"now-ui-icons ui-1_simple-add\"></i>\n                                            </Button>\n                                            <p style={quantityStyle}>{cartItemCount[idx].quantity}</p>\n                                            <Button\n                                              color=\"info\"\n                                              size=\"sm\"\n                                              round\n                                              onClick={() => removeItemFromCart(id,title,price)}\n                                            >\n                                              <i className=\"now-ui-icons ui-1_simple-delete\"></i>\n                                            </Button>\n\n                                          </div>\n                                        </span>,\n                            // AMOUNT\n                                        <span key={1}>\n                                          <small className={classes.tdNumberSmall}>$</small> {totalItemPrice(item)}\n                                        </span>,\n                                        <Tooltip\n                                          key={1}\n                                          id=\"close1\"\n                                          title=\"Remove item\"\n                                          placement=\"left\"\n                                          classes={{ tooltip: classes.tooltip }}\n                                        >\n                                          <Button link className={classes.actionButton}>\n                                            <Close  onClick={() => handleClick(item)}/>\n                                          </Button>\n                                        </Tooltip>\n                                      ]\n\n                                      if(mobileSize){\n                                        tableData = tableData.filter((data,idx) =>{\n                                              if(idx !== 1){\n                                                return data \n                                              }\n                                        })\n                                      }\n\n                        return(\n                                <CheckoutTable\n                                    key={id}\n                                    tableHead={tableHeadData}\n                                    tableData={[tableData]}\n                                        />\n                                            )\n                                          })\n                                          // end of sessionItems map\n\n                                         )\n                                      } \n                                      // end of sessionItems length\n\n                                      else {return <p style={noItemsMargin}>No items left in this cart</p>}\n                                    })()\n                                    }\n                                          <div style={itemDiv}>\n                                            <div style={innerItemDiv}></div>\n                                            <div style={lineItem}>\n                                              <p> Mask: ${maskTotal}</p>\n                                            </div>\n                                            <div style={lineItem}>\n                                              <p>Shipping: $5</p>\n                                              </div>\n                                            <div style={innerItemDiv}></div>\n                                          </div>                            \n                                      <div style={totalPriceDivStyle}>\n                                        <div style={totalPriceOuterStyle}></div>\n                                            <p style={totalPriceStyle}>Total: ${trueTotal.toFixed(2)}</p>\n                                        <div style={totalPriceOuterStyle}></div>\n                                          </div>\n                                      <Grid item xs={3}></Grid>\n                                        <Grid item xs={3}>\n                                          </Grid>\n                                          <Grid item xs={6}>\n                                        <Elements stripe={stripePromise}>\n                                          <CheckoutForm price={trueTotal} />\n                                        </Elements>\n                                        </Grid>\n                                        <Grid item xs={3}>\n                                          </Grid>\n                                      </CardBody>\n                                    </Card>\n                                    </div>\n                                    </div>\n                            </div>)}\nexport default withRouter(ShoppingCartPage)"]},"metadata":{},"sourceType":"module"}